背景：USキーボード搭載のMacでかな入力のタイピングを練習したかったがタイピングサイトで右手小指などのキーの挙動が異なるため練習ができなかった。
そこで、USキーボード搭載のMacでもかな入力のタイピングを練習するために今回Webサイトを作成した。

## TODO
+ [x] スコア送信2回以上遅れてしまうのを防止
+ [x] 時間もデータベースに格納する
+ [ ]  問題数によってスコアが異なるようにしたい
+ [ ]  仮想キーボードのおおきさもっと大きく
+ [ ]  問題をもっとたくさん
+ [ ]  ゲームのモードを追加（カウントダウン形式）
+ [x]  小文字の時光らない
+ [x]  濁点の後の文字が光らない
+ [ ]  わたしはろぼっとではありません認証
+ [x]  このタイピングサイトはユーザーのキーボードの設定をかな入力にしないと反応してくれません。かな入力でない英文字入力設定だとしてもかな入力の練習ができるようにしたい


## 使い方
`index.html` をブラウザで開くだけでプレイできます。

## ランキング（Supabase）セットアップ
1. Supabase プロジェクトを作成
2. プロジェクトの URL と anon key を取得
3. `supabaseConfig.js` の `SUPABASE_URL` と `SUPABASE_ANON_KEY` を置き換え
4. データベースで下記のテーブルとポリシーを作成

### スコアテーブル（avg_time と cpm を保存）
```
create table if not exists public.typing_scores (
  id bigint generated by default as identity primary key,
  name text not null,
  score int not null,
  avg_time numeric not null,
  cpm numeric not null,
  total_time numeric,
  created_at timestamptz default now()
);

alter table public.typing_scores enable row level security;

create policy "Allow read for anon" on public.typing_scores
for select to anon using (true);

create policy "Allow insert for anon" on public.typing_scores
for insert to anon with check (true);
```

### ユーザープロファイルテーブル（任意のユーザー登録機能用）
```
create table if not exists public.user_profiles (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users(id) on delete cascade unique not null,
  display_name text not null,
  email text,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

alter table public.user_profiles enable row level security;

create policy "Users can view own profile" on public.user_profiles
for select using (auth.uid() = user_id);

create policy "Users can insert own profile" on public.user_profiles
for insert with check (auth.uid() = user_id);

create policy "Users can update own profile" on public.user_profiles
for update using (auth.uid() = user_id);
```

5. Supabase Auth の設定
   - Supabase ダッシュボードで「Authentication」→「Settings」を開く
   - 「Enable Email Signup」が有効になっていることを確認
   - 「Site URL」を設定（開発環境の場合は `http://localhost` など）

6. `index.html` を開き、プレイできます
   - **ゲストプレイ**: 登録なしでプレイ可能。スコア投稿時は名前を入力
   - **ユーザー登録**: スタート画面の「ユーザー登録」から登録可能（任意）
   - **ログイン**: 登録済みの場合は「ログイン」からログイン。ログイン済みの場合は名前が自動入力されます

7. スコア画面で「名前」を入力（ログイン済みの場合は自動入力）し「スコア送信」を押す
8. 投稿後、ランキング（トップ20）が表示されます
