<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>完全版 かな入力タイピングゲーム</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>🎮 かな入力タイピングゲーム（フルキーボード）🎮</h1>

<!-- トップページ ランキング -->
<div id="topLeaderboard" style="margin:20px 0;">
  <h3>ランキング（トップ20）</h3>
  <div id="topLeaderboardList">読み込み中...</div>
  <hr>
</div>

<!-- スタート画面 -->
<div id="startScreen">
  <p>問題数を入力してください：</p>
  <input type="number" id="questionCount" min="1" value="5">
  <button id="startBtn">スタート</button>
</div>

<!-- ゲーム画面 -->
<div id="gameArea" style="display:none;">
  <div id="problem"></div>
  <!-- <input type="text" id="input" autocomplete="off" autofocus> -->
  <input id="input" type="text" inputmode="none" autocomplete="off" spellcheck="false">
  <div id="status">
    <p>問題番号: <span id="questionNumber">1</span></p>
    <p>正確さ: <span id="accuracy">100%</span></p>
    <p>速度: <span id="speed">0 文字/分</span></p>
  </div>

  <!-- 仮想キーボード -->
  <div id="keyboard"></div>
</div>

<!-- スコア画面 -->
<div id="scoreScreen" style="display:none;">
  <h2>🎉 全問クリア！ 🎉</h2>
  <p>平均時間: <span id="avgTime"></span> 秒</p>
  <p>平均正確さ: <span id="avgAccuracy"></span>%</p>
  <p>平均速度: <span id="avgSpeed"></span> 文字/分</p>
  <button id="restartBtn">もう一度プレイ</button>

  <div id="postScore" style="margin-top:20px;">
    <h3>ランキングに投稿</h3>
    <input id="playerName" type="text" placeholder="名前" maxlength="20" style="padding:6px;">
    <button id="submitScoreBtn">スコア送信</button>
    <p id="submitStatus"></p>
  </div>

  <div id="leaderboard" style="margin-top:30px;">
    <h3>ランキング（トップ20）</h3>
    <div id="leaderboardList"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabaseConfig.js"></script>
<script src="script.js"></script>
</body>
</html>